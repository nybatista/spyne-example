!function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],h=0,l=[];h<s.length;h++)a=s[h],o[a]&&l.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);l.length;)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={1:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;i.push([324,0]),n()}({324:function(e,t,n){"use strict";n.r(t);n(33),n(117);function r(){return{createpropsMap:function(){var e=new WeakMap,t={cid:this.props.cid};return e.set(t,this.props),{key:t,weakMap:e}},gc:function(){for(var e in this)delete this[e]},createId:function(){return"cid-"+Math.floor(1e7*Math.random(1e7))},setTraceFunc:function(e){return!0===e?console.log:function(){}}}}var o=n(10),i=function(e){if(void 0!==e.constructor.name)return e.constructor.name;var t=e.toString();return o.defaultTo(String(t).substr(0,12),o.match(/^(function\s)(\w+)(\(.*)$/,t)[2])},a=function(e){var t={};for(var n in e)t[n]=e[n];return t},s=function e(t){return{map:function(n){return e(n(t))},fold:function(e,n){return n(t)},inspect:function(){return"right("+t+")"}}},c=function(e,t){return o.isNil(e)?t:e},u=function e(t){return{map:function(n){return e(t)},fold:function(e,n){return e(t)},inspect:function(){return"left("+t+")"}}},d=n(10),h=n(17),l=function(){return{includes:function(){return void 0!==window.Spyne?(e=window.Spyne.channels.map,t=[],o.forEach(function(e,n,r){return t.push(n)},e),t):["ROUTE","UI","WINDOW","DISPATCHER"];var e,t}}},p=["LOAD","RENDER","MOUNT","UNMOUNT","DISPOSE","GARBAGE_COLLECT","UPDATE"],f=["parent","self","child","children","view"],m=["Observable","BehaviorSubject","Subject","Observer","Subscriber","FromEventObservable"],v=["subscribe","combineLatest"],E=[],b=[],g=[],N=[],y=[],S=[];if(void 0!==d&&void 0!==h){E=[{error:"need to match a valid name within "+m,predicate:function(e){return l().includes(e.name)}},{error:"param 'observable' must contain a valid Rx.Observable",predicate:function(e){return void 0!==e.observable.subscribe}},{error:"param action must be a registered action",predicate:function(e){return v.includes(e.action)}}],b=[{error:"needs cid number in srcElement",predicate:d.compose(d.is(String),d.path(["data","srcElement","cid"]))},{error:"needs a viewName in srcElement",predicate:d.compose(d.is(String),d.path(["data","srcElement","viewName"]))}],g=function(){return[].concat(E).concat(b)};var _=[{error:"need to match a valid name within "+m,predicate:function(e){return l().includes(e.name)}},{error:"needs one of the following step strings: "+p,predicate:function(e){return p.includes(e.STEP)}},{error:"type needs to one of the following: "+f,predicate:function(e){return f.includes(e.type)}},{error:"viewId needs to be added ",predicate:function(e){return void 0!==e.viewId}}];N=function(){return[].concat(_)},y=function(){return[{error:"DISPOSE STEP requires a disposeItem param in the data object",predicate:function(e){return"DISPOSE"===e.STEP&&void 0!==e.data.disposeItems}}].concat(_)},S=function(){var e=[{error:"UPDATE STEP requires a data object ",predicate:function(e){return"UPDATE"===e.STEP&&void 0!==e.data}}];return e.concat(_)},function(){return _.concat(E).concat(b)},function(){return[].concat(E).concat(b)},function(){var e=[{error:"param 'name' must be of a registered type",predicate:function(e){return l().includes(e.name)}},{error:"param 'observable' must contain a valid Rx.Observable",predicate:function(e){return m.includes((0,e.observable)().constructor.name)}},{error:"param action must be a registered action",predicate:function(e){return v.includes(e.action)}}];return{streams:[{init:{name:"DISPATCHER",observable:function(){return new h.Subject},action:"subscribe"},structure:{type:String,observable:h.Observable||h.Subject,action:String},validations:e},{init:{name:"UBU",observable:function(){return new h.Subject},action:"subscribe"},structure:{type:String,observable:h.Observable||h.Subject,action:String},validations:e}]}}}var A=n(118),T=n.n(A),C=n(10),O=T.a.Success,w=T.a.Failure,D=function(){};void 0!==C&&(D=C.curry(function(e,t){var n=O(C.curryN(C.length(e),C.always(t)));return C.reduce(function(e,n){return e.ap(n.predicate(t)?O(t):w([n.error]))},n,e)}));var I=n(10);function L(){var e=this;setTimeout(function(){I.forEach(function(e){},e)},1)}n(10);var P=function(){function e(e,t,n,r,o){void 0===r&&(r="subscribe"),void 0===o&&(o=!1),this.addMixins(),this.options={name:e,observable:t,data:n,action:r},this.getValidationChecks(e)}var t=e.prototype;return t.getValidationChecks=function(e){var t,n,r=this,o=window.Spyne.channels.map;return!0===o.has(e)?(n=g,r.onRunValidations(n)):(t="payload Needs a Valid Stream Name!",console.warn(t))},t.onRunValidations=function(e){D(e(),this.options).fold(this.onError.bind(this),this.onSuccess.bind(this))},t.onPayloadValidated=function(e){this.sendToDirectorStream(e)},t.sendToDirectorStream=function(e){window.Spyne.channels.getStream("DISPATCHER").next(e),this.gc()},t.onError=function(e){console.warn("payload failed due to:\n"+e.map(function(e){return"* "+e}).join("\n")),this.gc()},t.onSuccess=function(e){this.onPayloadValidated(e)},t.addMixins=function(){this.gc=L},e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(e,t,n,r,o,i){void 0===o&&(o={}),void 0===i&&(i=!0),this.addMixins(),this.options={name:e,STEP:t,type:n,viewId:r,data:o},this.getValidationChecks(t)}var t,n,r,o=e.prototype;return o.getValidationChecks=function(e){var t=this;return function(e,t,n){void 0===n&&(n=null);var r=e[t];return r?s(r):u(n)}({LOAD:N,RENDER:N,MOUNT:N,DISPOSE:y,UNMOUNT:N,GARBAGE_COLLECT:N,UPDATE:S},e,"lifestream payload Needs a Valid Stream Name!").fold(function(e){return console.warn(e)},function(e){return t.onRunValidations(e)})},o.onRunValidations=function(e){D(e(),this.options).fold(this.onError.bind(this),this.onSuccess.bind(this))},o.onPayloadValidated=function(e){return this._data=e,e},o.onError=function(e){console.error("payload failed due to:\n"+e.map(function(e){return"* "+e}).join("\n")),this.gc()},o.onSuccess=function(e){this.onPayloadValidated(e)},o.addMixins=function(){this.gc=L},t=e,(n=[{key:"data",get:function(){return this._data}}])&&M(t.prototype,n),r&&M(t,r),e}(),H=n(10),W=n(17);function k(){return{testFunc:function(e){console.log("stream mixin is ",e)},sendRoutePayload:function(e,t){return new P("ROUTE",e,t,"subscribe")},sendUIPayload:function(e,t){return new P("UI",e,t,"subscribe")},sendChannelPayload:function(e,t){var n=this,r=function(e){return H.prop(e,n.props)},o={payload:t,channel:e,srcElement:{cid:r("cid"),el:r("el"),viewName:r("name")}};return new P(e,new W.Observable.of(""),o,"subscribe")},sendLifeStreamPayload:function(e,t){return new P("LIFESTREAM",e,t,"subscribe")},createLifeStreamPayload:function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="parent");var r=this.props.name+": "+this.props.cid;return new V("LIFESTREAM",e,n,r,t).data}}}function U(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function F(e,t){var n;return t&&!0===t.clone&&U(e)?$((n=e,Array.isArray(n)?[]:{}),e,t):e}function x(e,t,n){var r=e.slice();return t.forEach(function(t,o){void 0===r[o]?r[o]=F(t,n):U(t)?r[o]=$(e[o],t,n):-1===e.indexOf(t)&&r.push(F(t,n))}),r}function $(e,t,n){var r=Array.isArray(t),o=(n||{arrayMerge:x}).arrayMerge||x;return r?Array.isArray(e)?o(e,t,n):F(t,n):function(e,t,n){var r={};return U(e)&&Object.keys(e).forEach(function(t){r[t]=F(e[t],n)}),Object.keys(t).forEach(function(o){U(t[o])&&e[o]?r[o]=$(e[o],t[o],n):r[o]=F(t[o],n)}),r}(e,t,n)}$.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return $(e,n,t)})};var j=n(10),G=function(){function e(t,n){var r=this;this.template=this.formatTemplate(t),this.templateData=n;var o=e.getStringArray(this.template),i=this.template.match(e.findTmplLoopsRE());i=null===i?[]:i;var a=j.contains(j.__,i),s=j.ifElse(a,function(t,n){return t.replace(e.parseTmplLoopsRE(),r.parseTheTmplLoop.bind(r))},this.addParams.bind(this));this.finalArr=o.map(s)}e.getStringArray=function(t){var n=t.split(e.findTmplLoopsRE()),r=/^([\\n\s\W]+)$/;return j.reject(function(e){return e.match(r)},n)},e.findTmplLoopsRE=function(){return/({{#\w+}}[\w\n\s\W]+?{{\/\w+}})/gm},e.parseTmplLoopsRE=function(){return/({{#(\w+)}})([\w\n\s\W]+?)({{\/\2}})/gm},e.swapParamsForTagsRE=function(){return/({{)(.*?)(}})/gm};var t=e.prototype;return t.removeThis=function(){this.finalArr=void 0,this.templateData=void 0,this.template=void 0},t.getTemplateNode=function(){var e=this.finalArr.join(" "),t=document.createRange().createContextualFragment(e);return window.setTimeout(this.removeThis(),10),t},t.getTemplateString=function(){return this.finalArr.join(" ")},t.formatTemplate=function(e){return"string"==typeof e?e:e.text},t.addParams=function(t){var n=this;return t.replace(e.swapParamsForTagsRE(),function(e,t,r,o){var i=n.templateData[r];return j.defaultTo("")(i)})},t.parseTheTmplLoop=function(t,n,r,o){var i=o;return this.templateData[r].map(function(t){var n;return"string"==typeof t?(n=t,t=i.replace(e.swapParamsForTagsRE(),n)):t=function(t,n){return n.replace(e.swapParamsForTagsRE(),function(e,n,r){return t[r]})}(t,i),t}).join(" ")},e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=n(10),q=function(){function e(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n=void 0),void 0===r&&(r=void 0),!0===K.is(String,t)&&(n=t,t={}),this.props=new Map,this.setProp("fragment",document.createDocumentFragment()),this.setProp("tagName",e),this.setProp("attrs",this.updateAttrs(t)),this.setProp("content",n),this.setProp("template",r),this.addMixins()}var t,n,o,i=e.prototype;return i.setProp=function(e,t){this.props.set(e,t)},i.getProp=function(e){return this.props.get(e)},i.setElAttrs=function(e,t){return this.getProp("attrs").forEach(function(t,n){"dataset"===n?K.forEachObjIndexed(function(t,n){e.dataset[n]=t},t):e.setAttribute(n,t)}),e},i.updateAttrs=function(e,t){var n=void 0!==t?t:new Map;return K.mapObjIndexed(function(e,t){return n.set(t,e)},e),n},i.addTemplate=function(e){var t=this,n=this.getProp("template");return void 0!==n?function(n){var r=t.getProp("content");r=K.is(Object,r)?r:{};var o=new G(n,r).getTemplateNode();return e.appendChild(o),e}(n):function(e){return e}(e)},i.createElement=function(e){return void 0===e&&(e="div"),document.createElement(e)},i.addContent=function(e){var t=this.getProp("content");if(!0===K.is(String,t)){var n=document.createTextNode(t);e.appendChild(n)}return e},i.execute=function(){var e=K.pipe(this.createElement.bind(this),this.setElAttrs.bind(this),this.addTemplate.bind(this),this.addContent.bind(this))(this.getProp("tagName"));this.props.set("el",e)},i.render=function(){return this.execute(),this.getProp("el")},i.returnIfDefined=function(e,t){if(void 0!==t){var n=void 0===t;e[t]=!1===n?t:$(e[va],t)}},i.updateprops=function(e){return this.returnIfDefined(this.props,e),this},i.updatepropsAndRun=function(e){return this.updateprops(e),this.execute(),this.getProp("fragment")},i.unmount=function(){void 0!==this.props&&(this.getProp("el").remove(),this.props.clear(),this.gc())},i.updateTag=function(e){void 0===e&&(e="div"),this.updateprops(e)},i.updateAttributes=function(e){void 0===e&&(e={}),this.updateprops(e)},i.updateTemplate=function(e){this.updateprops(e)},i.updateData=function(e){void 0===e&&(e={}),this.updateprops(e)},i.addTagAndRender=function(e){void 0===e&&(e="div"),this.updatepropsAndRun(e)},i.addAttrsibutesAndRender=function(e){void 0===e&&(e={}),this.updatepropsAndRun(e)},i.addTemplateAndRender=function(e){this.updatepropsAndRun(e)},i.addDataAndRender=function(e){void 0===e&&(e={}),this.updatepropsAndRun(e)},i.addMixins=function(){var e=r();this.gc=e.gc.bind(this)},t=e,(n=[{key:"el",get:function(){return this.props.get("el")}}])&&B(t.prototype,n),o&&B(t,o),e}(),Y=function(e,t,n,r){return void 0===e&&(e=!1),void 0===t&&(t=1),void 0===n&&(n="ease"),void 0===r&&(r=!1),(!0===r?"opacity:0;":"")+"transition: opacity "+t+"s "+n+"; opacity: "+(!0===e?1:0)+";"};var Q=n(17),z=n(10),J=function(){function e(t){this.props.observableStreams=e.createDirectionalObservables()}return e.createDirectionalFiltersObject=function(){return{P:["parent"],C:["child"],PCI:["parent","internal","child"],CI:["child","internal"],PI:["parent","internal"],PC:["parent","child"]}},e.addDefaultDir=function(e){return z.flip(z.merge)({$dir:["internal"]},z.clone(e))},e.addDownInternalDir=function(e,t){return void 0===t&&(t=["internal","down"]),z.flip(z.merge)(z.clone(e),{$dir:t})},e.addChildAndInternalDir=function(e,t){return void 0===t&&(t=["child","down"]),z.flip(z.merge)(z.clone(e),{$dir:t})},e.mapToDefaultDir=function(e){return this.addDefaultDir(e)},e.createDirectionalObservables=function(e,t,n){void 0===e&&(e=new Q.Subject),void 0!==t&&void 0!==n&&(e.viewName=t,e.cid=n);var r=function(e){return z.propSatisfies(function(t){return t.includes(e)},"$dir")},o=r("parent"),i=r("child"),a=r("internal"),s=function(e){return z.merge({from$:e})},c=s("child"),u=s("internal"),d=s("parent"),h=e.filter(function(e){return void 0!==e&&void 0!==e.action}),l=e.filter(a).map(u),p=e.filter(o).map(c),f=e.filter(i).map(d),m={parent:p,internal:l,child:f};return{raw$:h,toInternal$:l,toParent$:p,toChild$:f,completeAll:function(){z.forEach(function(e){e.complete(),e.isStopped=!0},[h,l,p,f])},completeStream:function(e){void 0===e&&(e=[]);void 0!==e&&e.length>=1&&e.forEach(function(e){var t;void 0!==m[e]&&((t=m[e]).complete(),t.isStopped=!0)})}}},e}(),X=n(17),Z=n(10),ee=function(){function e(e,t,n,r){var o=this;void 0===t&&(t={}),void 0===n&&(n=""),void 0===r&&(r="theName"),this.addMixins(),this._state="INIT",this.cid=n,this.vsName=r,this.defaults={debug:!1,extendedHashMethods:{}},this.options=$(this.defaults,t);this.addActionListeners().forEach(function(e){var t=e[0],n=e[1];o.options.extendedHashMethods[t]=function(e){return o[n](e)}}),this.options.hashMethods=this.setHashMethods(this.options.extendedHashMethods),this.sink$=e,this.sink$.subscribe(this.onSinkSubscribe.bind(this)),this.$dirs=J.createDirectionalFiltersObject(),this.addDefaultDir=J.addDefaultDir,this.sourceStreams=J.createDirectionalObservables(new X.Subject,this.vsName,this.cid),this._source$=this.sourceStreams.toInternal$}var t=e.prototype;return t.addActionListeners=function(){return[]},t.setHashMethods=function(e){var t=this;return void 0===e&&(e={}),$({GARBAGE_COLLECT:function(e){return t.onGarbageCollect(e)},READY_FOR_GC:function(e){return t.onReadyForGC(e)},DISPOSE:function(e){return t.onDispose(e)},RENDER:function(e){return t.onRender(e)},RENDER_AND_ATTACH_TO_PARENT:function(e){return t.onRenderAndAttachToParent(e)},RENDER_AND_ATTACH_TO_DOM:function(e){return t.onRenderAndAttachToDom(e)},ATTACH_CHILD_TO_SELF:function(e){return t.onAttachChildToSelf(e)}},e)},t.createDomItem=function(){this.props=void 0!==this.props?this.props:{};var e=Z.filter(function(e){return void 0!==e},Z.pick(["id","className"],this.props));return new q(this.props.tagName,e,this.props.data,this.props.template)},t.onDisposeCompleted=function(e){},t.animateInTween=function(e,t){!function(e,t){var n=1*window.getComputedStyle(e).opacity,r=Y(!0,t,"ease",1===n);e.style.cssText+=r}(e,t)},t.animateOutTween=function(e,t,n){!function(e,t,n){var r=Y(!1,t,"ease");e.style.cssText+=r,console.log(t," inline is ",r),e.addEventListener("transitionend",n,!1)}(e,t,n)},t.setAnimateIn=function(e){if(!0===e.animateIn){var t=void 0!==e.el?e.el:this.domItem.el;this.animateInTween(t,e.animateOutTime)}},t.disposeMethodOld=function(e){var t=this,n=X.Observable.bindCallback(function(e,n){var r=void 0!==e.el.el?e.el.el:e.el;t.animateOutTween(r,e.animateOutTime,n)}),r=function(e){t._source$.next({action:"READY_FOR_GC",$dir:t.$dirs.I})};return(!0===e.animateOut?function(e){return n(e).subscribe(r),{action:"DISPOSING",$dir:t.$dirs.CI}}:function(){return{action:"DISPOSE_AND_READY_FOR_GC",$dir:t.$dirs.PCI}})(e)},t.disposeMethod=function(e){var t=this;return void 0!==e.animateOutClass?(function(){var n=void 0!==e.el.el?e.el.el:e.el,r={action:"READY_FOR_GC",$dir:t.$dirs.PI,el:n};e.el$.setClass(e.animateOutClass);X.Observable.fromEvent(n,"transitionend").filter(function(e){return e.target===n}).take(1).subscribe(function(){t._source$.next(r)})}(),{action:"DISPOSING",$dir:this.$dirs.CI}):{action:"DISPOSE_AND_READY_FOR_GC",$dir:t.$dirs.CI}},t.onDispose=function(e){return this.disposeMethod(e)},t.removeStream=function(){void 0!==this.sourceStreams&&this.sourceStreams.completeStream(["internal","child"])},t.onGarbageCollect9=function(e){var t="PageChildBox"===this.vsName?1e3:0;window.setTimeout(this.onGarbageCollectRun.bind(this),t)},t.onReadyForGC=function(e){this.removeStream()},t.onGarbageCollect=function(e){this.domItem.unmount(),void 0!==this.sourceStreams&&this.sourceStreams.completeStream(["parent"])},t.getSourceStream=function(){return this._source$},t.combineDomItems=function(e){var t=Z.isNil(e.query)?e.node:e.query;("appendChild"===e.attachType?function(e,t){return e.appendChild(t)}:function(e,t){return e.insertBefore(t,e.firstChild)})(t,this.domItem.render()),this.setAnimateIn(e)},t.onAttachChildToSelf=function(e){var t=e.childRenderData;return this.combineDomItems(t),{action:"CHILD_ATTACHED",$dir:this.$dirs.PI}},t.onRenderAndAttachToParent=function(e){return this.onRender(e),this.combineDomItems(e),{action:"RENDERED_AND_ATTACHED_TO_PARENT",el:this.domItem.el,$dir:this.$dirs.PI}},t.renderDomItem=function(e){return this.domItem=new(Function.prototype.bind.apply(q,[null].concat(e))),this.domItem},t.onRender=function(e){var t,n=this;return{action:"RENDERED",el:(t=Z.props(["tagName","domAttributes","data","template"],e),n.renderDomItem(t)),$dir:this.$dirs.I}},t.extendedMethods=function(e){},t.onRenderAndAttachToDom=function(e){var t,n=this;return e.attachData.el=(t=Z.props(["tagName","domAttributes","data","template"],e),n.renderDomItem(t)),this.combineDomItems(e.attachData),{action:"RENDERED_AND_ATTACHED_TO_DOM",el:e.attachData.el.el,$dir:this.$dirs.CI}},t.onSinkSubscribe=function(e){var t,n=this,r=e.action,o=Z.defaultTo(function(e){return n.extendedMethods(e)})(this.options.hashMethods[r])(e);void 0!==o&&(t=Object.freeze(o),n._source$.next(t))},t.addMixins=function(){var e=r();this.createId=e.createId,this.createpropsMap=e.createpropsMap,this.convertDomStringMapToObj=a,this.ifNilThenUpdate=c},e}(),te=n(10),ne=function(){function e(e,t){this.context=e,this.enhancersMap=new Map,this.enhancersArr=t,this.initMap(),this.addAllEnhancerMethods()}var t=e.prototype;return t.initMap=function(){this.enhancersMap.set("ALL",[]);var e=function(e,t){void 0===e&&(e=void 0),void 0===t&&(t=[]);t=o.concat(["length","name","prototype","constructor"],t);var n=o.compose(o.without(t),o.uniq),r=n(Object.getOwnPropertyNames(e.constructor.prototype)),i=n(function(e,t){return void 0===e&&(e=void 0),void 0===t&&(t=[]),Object.getOwnPropertyNames(e)}(e.constructor));return{methods:r,staticMethods:i,allMethods:o.concat(r,i)}}(this.context).allMethods;this.updateMap("LOCAL",e)},t.getEnhancersMap=function(){return this.enhancersMap},t.updateMap=function(e,t){var n=te.concat(this.enhancersMap.get("ALL"),t);this.enhancersMap.set(e,t),this.enhancersMap.set("ALL",n)},t.getMethodsArr=function(e){return this.enhancersMap.get(e)},t.createEnhancerMethodsObj=function(e){var t,n,r,o=this,i=function(e){return console.error('Spyne Error: The following enhancer method, "'+e+'", already exists and cannot be added to the '+a.name+" Enhancer!")},a=new e(this.context),s=a.getEnhancerMethods(),c=(t=s.allMethods,n=te.contains(te.__,o.getMethodsArr("ALL")),(r=te.filter(n,t)).forEach(i),r),u=te.dropWhile(te.contains(te.__,c));return s=te.map(u,s),this.updateMap(a.name,s.allMethods),s.enhancer=a,s.name=a.name,s},t.addAllEnhancerMethods=function(){var e=this;te.forEach(function(t){var n=e.createEnhancerMethodsObj(t);n.enhancer.bindParentViewStream(n,e.context)},this.enhancersArr)},e}(),re=n(17),oe=n(10),ie=function(){function e(e,t){this.addMixins(),this.props=e,this.broadcastFn=t,this.broadcaster(this.broadcastFn)}var t=e.prototype;return t.addDblClickEvt=function(e){var t=re.Observable.fromEvent(e,"click");return t.buffer(t.debounceTime(250)).filter(function(e){return 2===e.length}).map(function(e){var t=oe.clone(e[0]);return t.typeOverRide="dblclick",t})},t.broadcast=function(e){var t,n=this,r={UI:this.sendUIPayload,ROUTE:this.sendRoutePayload},o=e[0],i=e[1],s=e[2],c=this.props.el.querySelectorAll(o),u=void 0!==s;void 0===c||c.length<=0?console.warn("Spyne Warning: The item "+o+", does not appear to exist!"):(c.forEach=Array.prototype.forEach,c.forEach(function(e){var o="dblClick"!==i?re.Observable.fromEvent(e,i):n.addDblClickEvt(e);t=e.dataset.channel;var s={};s.payload=a(e.dataset),s.payload=oe.omit(["channel"],s.payload),s.channel=t,s.srcElement={},s.srcElement.cid=n.props.id,s.srcElement.isLocalEvent=u,s.srcElement.viewName=n.props.name,s.srcElement.event=i,s.srcElement.el=e,(void 0!==t?r[t]:r.UI)(o,s)}))},t.broadcaster=function(e){var t=this;e().forEach(function(e){return t.broadcast(e)})},t.addMixins=function(){var e=k();this.sendUIPayload=e.sendUIPayload,this.sendRoutePayload=e.sendRoutePayload,this.createLifeStreamPayload=e.createLifeStreamPayload},e}();function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var se=n(10),ce=function(){function e(t,n){this.el=void 0!==n?t.querySelectorAll(n):t,this.queryStr=n,1===this.el.length?this.el=se.head(this.el):"NodeList"===this.el.constructor.name&&(this.el=e.createArrayFromNodeList(this.el)),this.cList=this.el.classList,this.elProps=new Map,this.createMethods()}e.createArrayFromNodeList=function(e){return se.reduce(function(e,t){return e.push(t),e},[],e)};var t,n,r,o=e.prototype;return o.createMethods=function(){this.addClass=this.mapToValue(function(e,t){return e.classList.add(t)}),this.removeClass=this.mapToValue(function(e,t){return e.classList.remove(t)}),this.setClass=this.mapToValue(function(e,t){return e.classList.value=t,e}),this.inlineCss=this.mapToValue(function(e,t){return e.style.cssText=t,e}),this.toggleClass=this.mapToValue(function(e,t,n){return void 0===n&&(n=!0),e.classList.toggle(t,n),e})},o.mapMethod=function(e){var t=this;return function(n){return t.elArr.map(e),t}},o.addAnimClass=function(e){var t=this,n=function(){return t.addClass(e)};return requestAnimationFrame(function(){setTimeout(n,0)}),this},o.mapToValue=function(e){var t=this;return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.elArr.map(function(t){return e.apply(void 0,[t,n].concat(o))}),t}},o.setClassOnBool=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!0),t?this.addClass(e):this.removeClass(e),this},o.setActiveItem=function(e,t){var n=document.querySelector(this.queryStr+e),r=se.ifElse(function(e){return e===n},function(e){e.classList.add(t)},function(e){e.classList.remove(t)});this.elArr.map(r)},o.query=function(t){if(null!==this.el.querySelector(t))return new e(this.el,t);var n=this.el.getAttribute("id");console.warn('Spyne Warning: the element, "'+t+'" does not exist in this element, "'+n+'"!')},o.getEl=function(){return this.el},o.unmount=function(){this.el=void 0,this.cList=void 0,this.inline=void 0},t=e,(n=[{key:"elArr",get:function(){return"NodeList"===this.el.constructor.name?e.createArrayFromNodeList(this.el):[].concat(this.el)}}])&&ae(t.prototype,n),r&&ae(t,r),e}();function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=n(17),he=n(10),le=function(){function e(e){var t=this;void 0===e&&(e={}),this.checker=Math.random(),this.addMixins(),this.defaults=function(){var n=t.createId(),r=e.id?e.id:n;return{cid:n,id:r,tagName:"div",el:void 0,data:void 0,animateIn:!1,animateInTime:.5,animateOut:!1,animateOutTime:.5,hashId:"#"+r,viewClass:ee,extendedSourcesHashMethods:{},debug:!1,template:void 0,node:document.createDocumentFragment(),name:i(t)}},this._state={},this.$dirs=J.createDirectionalFiltersObject(),this.addDefaultDirection=J.addDefaultDir,this.addDownInternalDir=J.addDownInternalDir,this.props=$(this.defaults(),e),this.props.domAttributes=he.pick(["id","class","dataset"],this.props),this.loadEnhancers(),this.loadAllMethods(),this.props.action="LOADED",this.sink$=new de.Subject;var n=this.props.viewClass;this.view=new n(this.sink$,{},this.props.cid,this.constructor.name),this.sourceStreams=this.view.sourceStreams,this._rawSource$=this.view.getSourceStream(),this._rawSource$.viewName=this.props.name,this.sendEventsDownStream=this.sendEventsDownStreamFn,this.init(),this.checkIfElementAlreadyExists()}var t,n,s,u=e.prototype;return u.checkIfElementAlreadyExists=function(){he.propSatisfies(he.allPass([function(e){return document.body.contains(e)},function(e){return void 0!==e&&void 0!==e.tagName}]),"el")(this.props)&&this.postRender()},u.loadEnhancers=function(e){void 0===e&&(e=[]);var t=new ne(this,e);this.props.enhancersMap=t.getEnhancersMap(),t=void 0},u.loadAllMethods=function(){var e=this,t=he.curry(this.onChannelMethodCall.bind(this));this.addActionListeners().forEach(function(n){var r=n[0],o=n[1],i=n[2],a=he.defaultTo("LOCAL");e.props.extendedSourcesHashMethods[r]=t(o,a(i))}),this.props.hashSourceMethods=this.setSourceHashMethods(this.props.extendedSourcesHashMethods)},u.addActionListeners=function(){return[]},u.onChannelMethodCall=function(e,t,n){if(void 0!==n.$dir&&n.$dir.includes("child")&&!0!==this.deleted){var r=$({},n);r.$dir=this.$dirs.C,this.sourceStreams.raw$.next(r)}var o=this.props.enhancersMap.get(t);!1===he.contains(e,o)?console.warn('Spyne Warning: The method, "'+e+'", does not appear to exist in '+t+" file! "):this[e](n)},u.setSourceHashMethods=function(e){var t=this;void 0===e&&(e={});var n={DISPOSING:function(e){return t.checkParentDispose(e)},DISPOSE:function(e){return t.onDispose(e)},RENDERED:function(e){return t.onRendered(e)},RENDERED_AND_ATTACHED_TO_DOM:function(e){return t.onRendered(e)},RENDERED_AND_ATTACHED_TO_PARENT:function(e){return t.onRendered(e)},READY_FOR_GC:function(e){return t.onReadyToGC(e)},NOTHING:function(){return{}}};return $.all([{},n,e])},u.init=function(){var e=this;this._source$=this._rawSource$.map(function(t){return e.onMapViewSource(t)}).takeWhile(this.notGCSTATE),this.initAutoMergeSourceStreams(),this.updateSourceSubscription(this._source$,!0)},u.notGCSTATE=function(e){return!e.action.includes("READY_FOR_GC")},u.eqGCSTATE=function(e){return!e.action.includes("READY_FOR_GC")},u.notCOMPLETED=function(e){return!e.action.includes("COMPLETED")},u.notGCCOMPLETE=function(e){return!e.action.includes("GC_COMPLETE")},u.testVal=function(e){console.log("TESTING VALL IS ",e)},u.addParentStream=function(e,t){var n=this;this.parent$=e.filter(function(e){return void 0!==e&&void 0!==e.action}).map(function(e){var t=$({},e);return"DISPOSE_AND_READY_FOR_GC"===t.action&&(n.onDispose(t),t.action="READY_FOR_GC"),t}).takeWhile(this.notGCCOMPLETE),this.updateSourceSubscription(this.parent$,!1,"PARENT"),this.renderAndAttachToParent(t)},u.addChildStream=function(e){var t=this,n=e.filter(function(e){return void 0!==e&&void 0!==e.action}).do(function(e){return t.tracer("addChildStraem do ",e)}).map(function(e){return e}).finally(function(e){return t.onChildCompleted(n.source)});this.updateSourceSubscription(n,!0,"CHILD")},u.onChildDisposed=function(e){},u.onChildCompleted=function(e){var t,n=(t=e,he.pick(["viewName","cid"],function e(t){for(;void 0!==t.destination;)t=e(t.destination);return t}(t)));return this.tracer("onChildCompleted ",this.checker,e),this.onChildDisposed(n,e),n},u.initAutoMergeSourceStreams=function(){var e=this,t={next:this.onSubscribeToSourcesNext.bind(this),error:this.onSubscribeToSourcesError.bind(this),complete:this.onSubscribeToSourcesComplete.bind(this)},n=function(){0===(r-=1)&&(e.props.el$.unmount(),e.uberSource$.complete(),e.autoSubscriber$.complete(),e.sink$.complete(),e.props=void 0,e.deleted=!0,e.tracer("completeAll",e.deleted,e.props))},r=0;this.uberSource$=new de.Subject;this.autoMergeSubject$=this.uberSource$.mergeMap(function(t){var o=t.observable.filter(function(e){return void 0!==e&&void 0!==e.action}).map(function(t){var n=$({},t);return n.action=t.action,e.tracer("autoMergeSubject$",n),n});return!1===t.autoClosesBool?o:(r+=1,o.finally(n))}),this.autoSubscriber$=this.autoMergeSubject$.filter(function(e){return void 0!==e&&void 0!==e.action}).subscribe(t)},u.updateSourceSubscription=function(e,t,n){void 0===t&&(t=!1);var r={observable:e,autoClosesBool:t,rel:n};this.tracer("updateSourceSubscription ",this.checker,r),this.uberSource$.next(r)},u.onSubscribeToSourcesNext=function(e){var t=this;void 0===e&&(e={});var n=he.defaultTo(function(e){return t.sendExtendedStreams(e)}),r=function(e,t){if(void 0!==e[t])return t;return o.compose(o.head,o.filter(o.compose(o.test(o.__,t),function(e){return new RegExp(e)})))(o.keys(e))}(this.props.hashSourceMethods,e.action);n(this.props.hashSourceMethods[r])(e),this.tracer("onSubscribeToSourcesNext",{payload:e})},u.onSubscribeToSourcesError=function(e){void 0===e&&(e=""),console.log("ALL ERROR  ",this.constructor.name,e)},u.onSubscribeToSourcesComplete=function(){this.tracer("onSubscribeToSourcesComplete","GARBAGE_COLLECT"),this.openSpigot("GARBAGE_COLLECT")},u.sendExtendedStreams=function(e){this.tracer("sendExtendedStreams",e),this.openSpigot(e.action,e)},u.renderAndAttachToParent=function(e){this.openSpigot("RENDER_AND_ATTACH_TO_PARENT",e)},u.renderView=function(){this.openSpigot("RENDER")},u.renderViewAndAttachToDom=function(e,t,n){var r={node:e,type:t,attachType:n};this.openSpigot("RENDER_AND_ATTACH_TO_DOM",{attachData:r})},u.attachChildToView=function(e){},u.checkParentDispose=function(e){"parent"===e.from$&&this.onDispose(e)},u.onBeforeDispose=function(){},u.onDispose=function(e){this.onBeforeDispose(),this.openSpigot("DISPOSE")},u.onChildDispose=function(e){},u.onParentDisposing=function(e){this.openSpigot("DISPOSE")},u.onReadyToGC=function(e){var t=void 0!==e.from$&&"internal"===e.from$;this.tracer("onReadyToGC",t,e)},u.sendEventsDownStreamFn=function(e,t){void 0===t&&(t={});var n=$({action:t},e);n.$dir=this.$dirs.C,this.sourceStreams.raw$.next(n)},u.openSpigot=function(e,t){if(void 0===t&&(t={}),void 0!==this.props){this.props.action=e;var n=he.merge(this.props,t);this.sink$.next(Object.freeze(n))}},u.setAttachData=function(e,t){return{node:this.props.el,type:"ViewToDomMediator",attachType:e,query:this.props.el.querySelector(t)}},u.getParentEls=function(e,t){for(var n=function(e){return e.parentElement},r=0,o=e;r<t;)o=n(o),r++;return o},u.setAttachParentData=function(e,t,n){return{node:this.getParentEls(this.props.el,n),type:"ViewToDomMediator",attachType:e,query:this.props.el.parentElement.querySelector(t)}},u.onMapViewSource=function(e){return void 0===e&&(e={}),this.props=he.merge(this.props,e),e},u.exchangeViewsWithChild=function(e,t){this.addChildStream(e.sourceStreams.toParent$),e.addParentStream(this.sourceStreams.toChild$,t)},u.appendToDom=function(e){this.renderViewAndAttachToDom(e,"dom","appendChild")},u.prependToDom=function(e){this.renderViewAndAttachToDom(e,"dom","prependChild")},u.appendView=function(e,t){this.exchangeViewsWithChild(e,this.setAttachData("appendChild",t))},u.appendViewToParent=function(e,t,n){void 0===n&&(n=1),this.exchangeViewsWithChild(e,this.setAttachParentData("appendChild",t,n))},u.prependViewToParent=function(e,t,n){void 0===n&&(n=1),this.exchangeViewsWithChild(e,this.setAttachParentData("prependChild",t,n))},u.prependView=function(e,t){this.exchangeViewsWithChild(e,this.setAttachData("prependChild",t))},u.onRendered=function(e){"internal"===e.from$&&this.postRender()},u.postRender=function(){this.beforeAfterRender(),this.afterRender(),this.viewsStreamBroadcaster=new ie(this.props,this.broadcastEvents)},u.beforeAfterRender=function(){this.props.el$=new ce(this.props.el)},u.downStream=function(){},u.afterRender=function(){},u.broadcastEvents=function(){return[]},u.getChannel=function(e){var t=this;return he.ifElse(function(e){return l().includes(e)},function(e){return window.Spyne.channels.getStream(e).observer.takeWhile(function(e){return!0!==t.deleted})},function(e){return console.warn("channel name "+e+" is not within "+l)})(e)},u.addChannel=function(e,t,n){var r=this;void 0===t&&(t=!1),void 0===n&&(n=!1);var o=!0===t?this.$dirs.CI:this.$dirs.I,i=he.path(["srcElement","isLocalEvent"]),a=he.path(["srcElement","cid"]),s=this.getChannel(e).map(function(e){var t=he.defaultTo({},he.clone(e));return $({$dir:o},t)}).filter(function(e){var t=a(e);return!0!==i(e)||t===r.props.cid});this.updateSourceSubscription(s,!1)},u.sendChannelPayload=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="VIEWSTREAM_EVENT");var r={payload:t,action:n,srcElement:{}};r.srcElement.cid=this.props.id,r.srcElement.isLocalEvent=!1,r.srcElement.viewName=this.props.name;var o=de.Observable.of(r);return new P(e,o,r)},u.tracer=function(){},u.isLocalEvent=function(e){return void 0!==he.path(["srcElement","el"],e)&&this.props.el.contains(e.srcElement.el)},u.addMixins=function(){var e=r();this.createId=e.createId,this.createpropsMap=e.createpropsMap,this.convertDomStringMapToObj=a,this.ifNilThenUpdate=c;var t=k();this.sendUIPayload=t.sendUIPayload,this.sendRoutePayload=t.sendRoutePayload,this.createLifeStreamPayload=t.createLifeStreamPayload},t=e,(n=[{key:"source$",get:function(){return this._source$}}])&&ue(t.prototype,n),s&&ue(t,s),e}();var pe=function(e){var t,r;function o(t){return void 0===t&&(t={}),t.tagName="article",t.class="photogs-view",t.template=n(325),e.call(this,t)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.addActionListeners=function(){return[]},i.broadcastEvents=function(){return[]},i.afterRender=function(){},o}(le);var fe=n(33),me=function(e){var t,n;function r(t){return void 0===t&&(t={}),t.tagName="section",t.class="page-content",t.id="photogs-container",e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addActionListeners=function(){return[]},o.broadcastEvents=function(){return[]},o.loadImages=function(e){var t=this;this.props.data=fe.prop("channelPayload",e),console.log("photog data ",e,this.props.data);var n,r;this.userData=this.props.data.map(function(e){return e.user}),this.userData=(n=this.userData,r="id",n.filter(function(e,t,n){return n.map(function(e){return e[r]}).indexOf(e[r])===t})),this.userData.forEach(function(e){console.log("user is ",e),t.appendView(new pe({data:e}))})},o.afterRender=function(){this.getChannel("ChannelData500px").take(1).subscribe(this.loadImages.bind(this))},r}(le),ve=n(323);n(327);var Ee=function(e){var t,r;function o(t){return void 0===t&&(t={}),t.tagName="article",t.template=n(326),e.call(this,t)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.addActionListeners=function(){return[["CHANNEL_ROUTE_CHANGE_EVENT","onRouteChangeEvent"]]},i.broadcastEvents=function(){return[["article dl","click"]]},i.onRouteChangeEvent=function(e){},i.onAnimate=function(e){var t=this;this.props.el$.addClass("expand");var n=this.props.el.offsetTop+45,r=document.querySelector("html"),o=window.pageYOffset;!function(){t.hideOverflow(!0),window.pageYOffset=0;var e="top:"+-1*o+"px;";r.style.cssText=e,console.log({elHtml:r,styleStr:e,topNum:n})}(),ve.TweenMax.to(r,.3,{top:-1*n,ease:Sine.easeInOut})},i.hideOverflow=function(e){void 0===e&&(e=!0),document.querySelector("html").classList.toggle("expand",e)},i.afterRender=function(){var e=this;!function(){var t=e.props.el$.query("img").el;e.hideOverflow(!1);t.onload=function(n){void 0!==e&&void 0!==e.props?(t.classList.add("reveal"),e.props.el$.query("aside").el.remove(),t.onload=function(){},t=void 0):(t.onload=function(){},t=void 0)}}(),e.addChannel("ROUTE")},o}(le);var be=function(e){var t,n;function r(t){return void 0===t&&(t={}),t.tagName="section",t.class="page-content",t.id="images-container",e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addActionListeners=function(){return[]},o.broadcastEvents=function(){return[]},o.loadImages=function(e){var t=this;this.photosData=e.channelPayload;this.photosData.forEach(function(e,n){e.indexNum=n+1,t.appendView(new Ee({data:e}))})},o.afterRender2=function(){},o.afterRender=function(){this.getChannel("ChannelData500px").take(1).subscribe(this.loadImages.bind(this))},r}(le);var ge=function(e){var t,r;function o(t){return void 0===t&&(t={}),t.tagName="section",t.class="empty",t.template=n(328),e.call(this,t)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.addActionListeners=function(){return[["CHANNEL_UI_CLICK_EVENT","onClicked"]]},i.onClicked=function(e){console.log("item is clicked ")},i.broadcastEvents=function(){return[["button#testbtn","click"]]},i.afterRender=function(){this.addChannel("UI")},o}(le);var Ne=function(e){var t,n;function r(t){var n;return void 0===t&&(t={}),t.class="page-view",t.pageId=t.routeInfo.keywords.pageId,(n=e.call(this,t)||this).disposeReady=!1,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getPageType=function(e){return{home:ge,gallery:be,photographers:me}[e]||ge},o.addActionListeners=function(){return[["CHANNEL_ROUTE_CHANGE_EVENT","onRouteChangeEvent"]]},o.broadcastEvents=function(){return[]},o.onRouteChangeEvent=function(e){var t=R.path(["channelPayload","keywords","pageId"],e),n=this.props.pageId===t;!1===n&&(console.log("dispose is ready",e,{routePageId:t,isNotCurrentPageId:n}),this.onDispose()),this.disposeReady=!0},o.getLocationVal=function(){var e=window.location.pathname;if(e.length>1){e=e.replace(/^\//g,"")}return e},o.afterRender=function(){console.log("page view route info ",this.props.routeInfo);this.props.routeInfo.keywords.pageId;var e=this.getPageType(this.props.pageId);this.appendView(new e),this.addChannel("ROUTE")},r}(le);n(33);var ye=function(e){var t,n;function r(t){return void 0===t&&(t={}),t.id="pages-holder",t.class="stage",e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addActionListeners=function(){return[["CHANNEL_ROUTE.*","onRouteChangeEvent"],["CHANNEL_UI.*","onUIEvent"],["CHANNEL_WINDOW.*","onDomChannel"]]},o.broadcastEvents=function(){return[]},o.onUIEvent=function(e){this.isLocalEvent(e)?console.log("LCOAL EVENT ",e):console.log("GLOBAL EVENT ",e)},o.onDomChannel=function(e){console.log("CHANNEL WINDOW ",this.isLocalEvent(e))},o.onRouteDeepLink=function(e){console.log("route deep link ",e,this.isLocalEvent(e))},o.onRouteChangeEvent=function(e){var t=e.channelPayload;console.log("route info ",t);t.pageId;this.appendView(new Ne({routeInfo:t}))},o.afterRender=function(){this.addChannel("ROUTE"),this.addChannel("UI"),this.addChannel("WINDOW")},r}(le);n(33);var Se=function(e){var t,r;function o(t){return void 0===t&&(t={}),t.tagName="section",t.id="menu",t.template=n(329),e.call(this,t)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.addActionListeners=function(){return[["SCROLL_EVENT","onScrollEvent"]]},i.broadcastEvents=function(){return[]},i.onScrollEvent=function(e){console.log("scroll event is ",e);var t=e.scrollY>=45;this.props.el.classList.toggle("hide",t)},i.afterRender=function(){},o}(le);var _e=function(e){var t,n;function r(t){return void 0===t&&(t={}),e.call(this,t)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addActionListeners=function(){return[]},o.broadcastEvents=function(){return[[".nav-btn","click"],[".nav-btn-ui","click"]]},o.testSendPayload=function(){},o.afterRender=function(){this.appendView(new Se),this.appendView(new ye),this.testSendPayload(),this.getChannel("WINDOW").subscribe(function(e){console.log("window event  ",e.action,e)}),this.getChannel("ChannelData500px").subscribe(function(e){console.log("data ",e)})},r}(le),Ae=n(10),Te=function(){function e(t,n,r,o,i){var a=t,s={channel:a,action:n,channelPayload:r,srcElement:o,event:i},c=window.Spyne.getChannelActions(a);return e.validateAction(n,a,c),"ROUTE"===a&&(s.location=e.getLocationData()),s}return e.validateAction=function(e,t,n){var r=Ae.contains(e,n);return!1===r&&void 0!==window.Spyne&&console.warn("warning: Action: '"+e+"' is not registered within the "+t+" channel!"),r},e.getLocationData=function(){return Ae.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},e.getStreamItem=function(){},e.getMouseEventKeys=function(){return["altKey","bubbles","cancelBubble","cancelable","clientX","clientY","composed","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","fromElement","isTrusted","layerX","layerY","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","path","relatedTarget","returnValue","screenX","screenY","shiftKey","sourceCapabilities","srcElement","target","timeStamp","toElement","type","view","which","x","y"]},e}();function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe=n(17),we=n(10),De=function(){function e(e){var t=this;void 0===e&&(e={}),this.addMixins(),this.addRegisteredActions.bind(this),this.createChannelActionsObj();var n=new Oe.Subject;this.props=$({name:"observer"},e),this.observer$=this.props.observer=n,this.streamsController=window.Spyne.channels,this.streamsController.getStream("DISPATCHER").subscribe(function(e){return t.onIncomingObservable(e)})}var t,n,r,o=e.prototype;return o.initializeStream=function(){},o.setTrace=function(e){},o.createChannelActionsObj=function(){var e=this.addRegisteredActions(),t=we.mergeAll(we.chain(function(e){return we.objOf(e,e)},e));this.channelActions=t},o.addRegisteredActions=function(){return[]},o.onIncomingObservable=function(e){var t=this,n=function(t){return{observableData:e.data,observableEvent:t}};return!0===we.equals(e.name,this.props.name)?function(e){return e.observable.map(n).subscribe(t.onIncomingObserverableData.bind(t))}(e):void 0},o.onIncomingObserverableData=function(e){},o.sendStreamItem=function(e,t,n,r,o){void 0===o&&(o=this.observer$);var i=new Te(this.props.name,e,t,n,r);o.next(Object.freeze(i))},o.getChannel=function(e){var t=this;return we.ifElse(function(e){return l().includes(e)},function(e){return t.streamsController.getStream(e).observer},function(e){return console.warn("channel name "+e+" is not within "+l)})(e)},o.addMixins=function(){},t=e,(n=[{key:"observer",get:function(){return this.observer$}}])&&Ce(t.prototype,n),r&&Ce(t,r),e}(),Ie=n(10),Re=function(){function e(){this.checkIfObjIsNotEmptyOrNil=e.checkIfObjIsNotEmptyOrNil.bind(this)}return e.checkIfObjIsNotEmptyOrNil=function(e){var t=Ie.compose(Ie.complement(Ie.isEmpty),Ie.head,Ie.values),n=Ie.compose(Ie.complement(Ie.isNil),Ie.head,Ie.values);return Ie.allPass([t,n])(e)},e.checkIfParamValueMatchesRegex=function(e,t){var n=Ie.reject(Ie.equals("keyword")),r=Ie.compose(n,Ie.keys),o=Ie.compose(Ie.find(function(t){return Ie.test(new RegExp(t),e)}),r)(t);return Ie.is(String,o)&&(t=Ie.assoc(e,Ie.prop(o,t),t)),t},e.getLocationStrByType=function(e,t){void 0===t&&(t=!1);var n={slash:"pathname",query:"search",hash:"hash"}[!0===t?"hash":e];return Ie.prop(n,window.location).replace(/^(\/)?(#)?(\/)?(.*)$/,"$4")},e.createRouteArrayFromParams=function(e,t,n,r){var o=this;void 0===n&&(n="slash");var i=[];return function t(n){var a={},s=n.keyword,c=void 0!==e[s]?e[s]:Ie.prop(s,r),u=typeof n[c];"string"===u?c=n[c]:"undefined"===u&&(n=o.checkIfParamValueMatchesRegex(c,n)),a[s]=c,o.checkIfObjIsNotEmptyOrNil(a)&&i.push(a);var d=Ie.is(Object,n),h=Ie.has(c,n),l=Ie.has("route",n);if(!0===(h&&d)){var p=n[c];Ie.has("route",p)&&t(p.route)}else!0===l&&void 0!==c&&t(n.route)}(t),i},e.createSlashString=function(e){var t=Ie.reject(Ie.isNil),n=Ie.when(Ie.complement(Ie.isNil,Ie.__),Ie.join("/"));return Ie.compose(n,t,Ie.flatten,Ie.map(Ie.values))(e)},e.createQueryString=function(e){var t=Ie.reject(Ie.isNil),n=this.checkIfObjIsNotEmptyOrNil,r=Ie.compose(Ie.join("="),Ie.flatten,Ie.toPairs),o=Ie.ifElse(n,r,Ie.always(void 0)),i=Ie.map(o),a=Ie.when(Ie.complement(Ie.isEmpty),Ie.concat("?"));return Ie.compose(a,Ie.join("&"),t,i)(e)},e.convertParamsToRoute=function(e,t,n,r){void 0===t&&(t=window.Spyne.config.channels.ROUTE);var o=void 0!==n?n:t.type,i=t.isHash,a=t.routes.route,s=void 0!==r?r:this.getLocationStrByType(o,i),c=this.convertRouteToParams(s,t,o).keywords,u=this.createRouteArrayFromParams(e,a,o,c);return"query"===o?this.createQueryString(u):this.createSlashString(u)},e.checkIfValueShouldMapToParam=function(e,t){var n=Ie.invert(e),r=Ie.compose(Ie.is(String),Ie.head,Ie.defaultTo([]),Ie.prop(t)),o=Ie.compose(Ie.head,Ie.prop(t));return Ie.ifElse(r,o,Ie.always(t))(n)},e.createArrFromSlashStr=function(e){return e.replace(/^([/])?(.*)$/,"$2").split("/")},e.convertSlashRouteStrToParamsObj=function(e,t){var n=this,r=t,o=this.createArrFromSlashStr(t),i=[],a=[],s=e;Ie.reduce(function(e,t){var r=n.checkIfValueShouldMapToParam(s,t);void 0!==(s=n.checkIfParamValueMatchesRegex(t,s))&&(i.push(s.keyword),a.push(r));var o=[t,"route"],c=Ie.path(o,s),u=Ie.path(["route"],s);void 0!==c?s=c:void 0!==u&&(s=u)},0,o);var c=Ie.zipObj(i,a),u=this.getLastArrVal(i);return{routeKeywordsArr:i,routeKeyword:u,keywords:c,routeValue:r}},e.getLastArrVal=function(e){var t;return t=e,void 0!==Ie.last(t)?Ie.last(t):""},e.createDefaultParamFromEmptyStr=function(e,t){var n={};return n[e.keyword]=this.checkIfValueShouldMapToParam(e,t),n},e.convertQueryStrToParams=function(e,t){var n=t,r=t.replace(/^([?])?(.*)$/,"$2"),o=Ie.compose(Ie.map(Ie.split("=")),Ie.split("&"))(r),i=Ie.fromPairs(o),a=Ie.map(Ie.head,o);return!0===Ie.isEmpty(t)&&(i=this.createDefaultParamFromEmptyStr(e,t),a=Ie.keys(i)),{routeKeywordsArr:a,routeKeyword:this.getLastArrVal(a),keywords:i,routeValue:n}},e.convertRouteToParams=function(e,t,n){if(void 0===t)return{};var r=void 0!==n?n:t.type,o=t.routes.route;return"query"===r?this.convertQueryStrToParams(o,e):this.convertSlashRouteStrToParamsObj(o,e)},e}(),Le=n(10),Pe=n(17),Me=function(){function e(){this.createPopStateStream=e.createPopStateStream.bind(this)}return e.createPopStateStream=function(e){Pe.Observable.fromEventPattern(function(e){window.onpopstate=e},function(){window.onpopstate=function(){}}).subscribe(e)},e.getLastArrVal=function(e){var t;return t=e,void 0!==Le.last(t)?Le.last(t):""},e.getRouteArrData=function(t,n){var r=Le.filter(Le.contains(Le.__,t),n);return{routeKeywordsArr:r,routeKeyword:e.getLastArrVal(r)}},e.flattenConfigObject=function(e){return Le.values(Le.fromPairs(function e(t){return Le.chain(function(t){var n=t[0],r=t[1];return"[object Object]"===Object.prototype.toString.call(r)?Le.map(function(e){var t=e[0],r=e[1];return[n+"."+t,r]},e(r)):[[n,r]]},Le.toPairs(t))}(e)))},e.getLocationData=function(){return Le.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},e}();var Ve=n(17),He=n(10),We=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).createChannelActionsObj(),t.props.name="ROUTE",t.routeConfigJson=t.getRouteConfig(),t.bindStaticMethods(),t.navToStream$=new Ve.BehaviorSubject,t.observer$=t.navToStream$.map(function(e){return t.onMapNext(e)}),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initializeStream=function(){this.initStream()},o.createChannelActionsObj=function(){var e=this.addRegisteredActions(),t=He.mergeAll(He.chain(function(e){return He.objOf(e,e)},e));this.channelActions=t},o.addRegisteredActions=function(){return["CHANNEL_ROUTE_DEEPLINK_EVENT","CHANNEL_ROUTE_CHANGE_EVENT"]},o.getRouteConfig=function(){var e=window.Spyne.config,t=He.path(["channels","ROUTE"],e);"query"===t.type&&(t.isHash=!1);var n=Me.flattenConfigObject(t.routes);return t.paramsArr=n,t},o.initStream=function(){this.firstLoadStream$=new Ve.BehaviorSubject(this.onIncomingDomEvent(void 0,this.routeConfigJson,"CHANNEL_ROUTE_DEEPLINK_EVENT")),Me.createPopStateStream(this.onIncomingDomEvent.bind(this)),this.observer$=Ve.Observable.merge(this.firstLoadStream$,this.navToStream$)},o.onMapNext=function(e,t){return void 0===t&&(t=!1),e.action="CHANNEL_ROUTE_CHANGE_EVENT",e},r.onIncomingDomEvent=function(e,t,n){void 0===t&&(t=this.routeConfigJson);var r=void 0!==n?n:this.channelActions.CHANNEL_ROUTE_CHANGE_EVENT,o=this.getDataFromString(t);this.sendStreamItem(r,o,void 0,void 0,this.navToStream$)},o.onIncomingObserverableData=function(e){var t=this.channelActions.CHANNEL_ROUTE_CHANGE_EVENT,n=this.getDataFromParams(e),r=He.path(["observableData","srcElement"],e),o=e.observableEvent,i=!n.isHidden;this.sendRouteStream(n,i),this.sendStreamItem(t,n,r,o,this.navToStream$)},o.sendRouteStream=function(e,t){void 0===t&&(t=!0),!0===t&&this.setWindowLocation(e)},r.getRouteState=function(e){return"CHANNEL_ROUTE_CHANGE_EVENT"},r.getIsDeepLinkBool=function(){return 0===this._routeCount},r.getRouteCount=function(){return void 0===this._routeCount?(this._routeCount=0,this._routeCount):(this._routeCount+=1,this._routeCount)},r.getExtraPayloadParams=function(e){return void 0===e&&(e=this.routeConfigJson),{routeCount:this.getRouteCount(),isDeepLink:this.getIsDeepLinkBool(),isHash:e.isHash,isHidden:e.isHidden,routeType:e.type}},r.getDataFromParams=function(e,t){void 0===t&&(t=this.routeConfigJson);var n=He.path(["observableData","payload"],e),r=this.getRouteStrFromParams(n,t),o=this.getDataFromLocationStr(),i=o.routeKeyword,a=o.routeKeywordsArr;n=He.merge(o.keywords,n);var s=this.getExtraPayloadParams(t),c=s.routeCount;return{isDeepLink:s.isDeepLink,routeCount:c,routeKeyword:i,routeKeywordsArr:a,keywords:n,routeValue:r,isHash:s.isHash,isHidden:s.isHidden,routeType:s.routeType}},r.getDataFromString=function(e,t){void 0===e&&(e=this.routeConfigJson);var n=e.type,o=!0===e.isHash,i=Re.getLocationStrByType(n,o),a=r.getParamsFromRouteStr(i,e,n),s=a.routeKeywordsArr,c=a.routeKeyword,u=a.keywords,d=a.routeValue,h=this.getExtraPayloadParams(e),l=h.routeCount,p=h.isDeepLink,f=h.isHash,m=h.routeType;return{isDeepLink:p,routeCount:l,routeKeyword:c,routeKeywordsArr:s,keywords:u,routeValue:d,isHash:f,isHidden:h.isHidden,routeType:m}},r.getDataFromLocationStr=function(e){void 0===e&&(e="slash");var t=void 0!==this.routeConfigJson?this.routeConfigJson.type:e,n=Re.getLocationStrByType(t),r=this.getParamsFromRouteStr(n,this.routeConfigJson,t);return{routeKeywordsArr:r.routeKeywordsArr,routeKeyword:r.routeKeyword,keywords:r.keywords,routeValue:r.routeValue,action:this.getRouteState()}},r.getLocationData=function(){return He.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},r.getRouteStrFromParams=function(e,t,n){var r=void 0!==n?n:t.type;return Re.convertParamsToRoute(e,t,r)},r.getParamsFromRouteStr=function(e,t,n){var r=void 0!==n?n:t.type;return Re.convertRouteToParams(e,t,r)},o.checkEmptyRouteStr=function(e,t){void 0===t&&(t=!1);var n=He.isEmpty(e),r=!0===n&&!1===t,o=!0===n&&!0===t,i=!1===n&&!0===t;return console.log("ROUTE STR CHECK ",{str:e,isHash:t}),!0===r||!0===o?"/":!0===i?He.concat("#",e):e},o.setWindowLocation=function(e){var t=e.isHash,n=e.routeValue;if(n=this.checkEmptyRouteStr(n,t),!0===t)console.log("ROUTE STR FOR HASH ",n),window.history.pushState({},"",n);else{var r=He.when(He.compose(He.complement(He.equals("/")),He.head),He.concat("/",He.__));window.history.pushState({},"",r(n))}},o.getWindowLocation=function(){return window.location.pathname},o.bindStaticMethods=function(){this.getIsDeepLinkBool=r.getIsDeepLinkBool.bind(this),this.getDataFromLocationStr=r.getDataFromLocationStr.bind(this),this.onIncomingDomEvent=r.onIncomingDomEvent.bind(this),this.getDataFromString=r.getDataFromString.bind(this),this.getParamsFromRouteStr=r.getParamsFromRouteStr.bind(this),this.getLocationData=r.getLocationData.bind(this),this.getRouteState=r.getRouteState.bind(this),this.getDataFromParams=r.getDataFromParams.bind(this),this.getRouteCount=r.getRouteCount.bind(this),this.getExtraPayloadParams=r.getExtraPayloadParams.bind(this);var e=He.curryN(3,r.getRouteStrFromParams);this.getRouteStrFromParams=e(He.__,this.routeConfigJson,this.routeConfigJson.type)},r}(De);var ke=n(10),Ue=n(17),Fe=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).props.name="UI",t.keyEventsLoaded=!1,t.keyCodeArr=[],t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.addRegisteredActions=function(){return["CHANNEL_UI_EVENT","CHANNEL_UI_BLUR_EVENT","CHANNEL_UI_CLICK_EVENT","CHANNEL_UI_CHANGE_EVENT","CHANNEL_UI_CHANGE_EVENT","CHANNEL_UI_DBLCLICK_EVENT","CHANNEL_UI_FOCUS_EVENT","CHANNEL_UI_FOCUSIN_EVENT","CHANNEL_UI_FOCUSOUT_EVENT","CHANNEL_UI_INPUT_EVENT","CHANNEL_UI_KEYDOWN_EVENT","CHANNEL_UI_KEYPRESS_EVENT","CHANNEL_UI_KEYUP_EVENT","CHANNEL_UI_MOUSEDOWN_EVENT","CHANNEL_UI_MOUSEENTER_EVENT","CHANNEL_UI_MOUSELEAVE_EVENT","CHANNEL_UI_MOUSEMOVE_EVENT","CHANNEL_UI_MOUSEOUT_EVENT","CHANNEL_UI_MOUSEOVER_EVENT","CHANNEL_UI_MOUSEUP_EVENT","CHANNEL_UI_SELECT_EVENT"]},o.loadKeyStream=function(){var e=this,t=Ue.Observable.fromEvent(document,"keyup");this.keyPresses$=t.groupBy(function(e){return e.keyCode}).mergeAll().filter(function(t){return e.keyCodeArr.indexOf(t.keyCode)>=0}).repeat().subscribe(this.onKeyPressed.bind(this))},o.addKeyEvent=function(e){!1===this.keyEventsLoaded&&this.loadKeyStream(),this.keyEventsLoaded=!0,this.registerKey(e)},o.registerKey=function(e){this.keyCodeArr.push(e)},o.onKeyPressed=function(e){console.log("key is ",e)},o.onIncomingObservable=function(e){var t=this,n=function(t){return{observableData:e.data,uiEvent:t}};return!0===ke.equals(e.name,this.props.name)?function(e){return e.observable.map(n).subscribe(t.onUIEvent.bind(t))}(e):void 0},o.getActionState=function(e){var t=ke.path(["uiEvent","type"]),n=ke.path(["uiEvent","typeOverRide"]),r=ke.compose(ke.toUpper,ke.either(n,t))(e);return void 0!==r?"CHANNEL_UI_"+r+"_EVENT":"CHANNEL_UI"},o.onUIEvent=function(e){e.action=this.getActionState(e);var t=e.action,n=e.observableData,r=n.payload,o=n.srcElement,i=e.uiEvent;this.sendStreamItem(t,r,o,i)},r}(De),xe=n(17),$e=n(10),je=function(){function e(){this.createDomObservableFromEvent=e.createDomObservableFromEvent.bind(this)}return e.createDomObservableFromEvent=function(e,t,n){void 0===n&&(n=!0);return t=void 0===t?function(e){return e}:t,xe.Observable.fromEventPattern(function(t){return window.addEventListener(e,t,{passive:n})},function(){window[e]=function(e){return e}}).map(t)},e.createMediaQuery=function(e){var t=window.matchMedia(e);return this.checkIfValidMediaQuery(t,e),t},e.checkIfValidMediaQuery=function(e,t){var n=function(e){return e.replace(/\s+/gm,"")},r="MediaQueryList"===e.constructor.name&&n(e.media)===n(t);return!1===r&&function(t){console.warn('Spyne Warning: the following query string, "'+t+'", does not match "'+e.media+'" and may not be a valid Media Query item!')}(t),r},e.createMediaQueryHandler=function(e,t){var n,r=function(e){return function(t){return t.mediaQueryName=e,t}}(t),o=(n=e,{addHandler:function(e){n.onchange=e},removeHandler:function(e){n.onchange=function(){}}});return new xe.Observable.fromEventPattern(o.addHandler,o.removeHandler).map(r)},e.createMergedObsFromObj=function(t){var n=t.mediqQueries,r=[];return $e.mapObjIndexed(function(t,n,o){var i=e.createMediaQuery(t);r.push(e.createMediaQueryHandler(i,n))},n),r},e}();var Ge=n(10),Be=n(17),Ke=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).bindStaticMethods(),t.observer$=new Be.Subject,t.props.name="WINDOW",t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.initializeStream=function(){var e,t=this;this.domChannelConfig=window.Spyne.config.channels.WINDOW,this.currentScrollY=window.scrollY;var n=this.getActiveObservables();(e=Be.Observable).merge.apply(e,n).subscribe(function(e){var n=e.action,r=e.channelPayload,o=e.srcElement,i=e.event;t.sendStreamItem(n,r,o,i)})},r.getScrollMapFn=function(e){var t=this.channelActions.CHANNEL_WINDOW_SCROLL_EVENT,n=window.scrollY,r=this.currentScrollY-n,o=r>=0?"up":"down";return this.currentScrollY=n,{action:t,channelPayload:{scrollY:n,scrollDistance:r,scrollDir:o},srcElement:e.srcElement,scrollDistance:r,event:e}},r.getMouseWheelMapFn=function(e){return{action:this.channelActions.CHANNEL_WINDOW_MOUSEWHEEL_EVENT,channelPayload:{scrollDir:e.deltaY<=0?"up":"down",deltaX:e.deltaX,deltaY:e.deltaY,deltaZ:e.deltaZ},srcElement:e.srcElement,event:e}},r.createCurriedGenericEvent=function(e){var t="CHANNEL_WINDOW_"+e.toUpperCase()+"_EVENT";return Ge.curry(r.mapGenericEvent)(t)},r.mapGenericEvent=function(e,t){return console.log("map generic event ",e),{action:e,channelPayload:t,srcElement:t.srcElement,event:t}},r.getResizeMapFn=function(e){return{action:this.channelActions.CHANNEL_WINDOW_RESIZE_EVENT,channelPayload:Ge.pick(["innerWidth","innerHeight","outerWidth","outerHeight"],window),srcElement:e.srcElement,event:e}},r.getOrientationMapFn=function(e){var t=this.channelActions.CHANNEL_WINDOW_ORIENTATION_EVENT,n=window.matchMedia("(orientation: portrait)").matches,r=Ge.pick(["innerWidth","innerHeight","outerWidth","outerHeight"],window);return r.orientation=!0===n?"portrait":"landscape",{action:t,channelPayload:r,srcElement:e.srcElement,event:e}},i.getMediaQueryMapFn=function(e){return{action:this.channelActions.CHANNEL_WINDOW_MEDIA_QUERY_EVENT,channelPayload:Ge.pick(["matches","media","mediaQueryName"],e),srcElement:e.srcElement,event:e}},i.createMouseWheelObservable=function(e){var t=e.debounceMSTimeForScroll;return je.createDomObservableFromEvent("mousewheel",r.getMouseWheelMapFn.bind(this)).debounceTime(t)},i.createScrollObservable=function(e){var t=e.debounceMSTimeForScroll;return je.createDomObservableFromEvent("scroll",r.getScrollMapFn.bind(this)).debounceTime(t).skipWhile(function(e){return 0===e.scrollDistance})},i.createOrientationObservable=function(e){return je.createDomObservableFromEvent("orientationchange",r.getOrientationMapFn.bind(this))},i.createResizeObservable=function(e){var t=e.debounceMSTimeForResize;return je.createDomObservableFromEvent("resize",r.getResizeMapFn.bind(this)).debounceTime(t)},i.getEventsFromConfig=function(e){void 0===e&&(e=this.domChannelConfig);var t=e.events;return Ge.map(function(e){var t=r.createCurriedGenericEvent(e);return je.createDomObservableFromEvent(e,t)},t)},i.getActiveObservables=function(e){void 0===e&&(e=this.domChannelConfig);var t,n,r,i=[];e.listenForMediaQueries=(t=e.mediqQueries,n=o.compose(o.complement(o.isEmpty),o.head,o.values),r=o.compose(o.complement(o.isNil),o.head,o.values),o.allPass([n,r])(t));var a={listenForResize:this.createResizeObservable.bind(this),listenForOrientation:this.createOrientationObservable.bind(this),listenForScroll:this.createScrollObservable.bind(this),listenForMouseWheel:this.createMouseWheelObservable.bind(this)};Ge.mapObjIndexed(function(t,n,r){e[n]&&i.push(t(e))},a),this.checkForMediaQueries(e.listenForMediaQueries);var s=this.getEventsFromConfig(e);return i=i.concat(s)},i.checkForMediaQueries=function(e){var t=this;!0===e&&this.getMediaQueryObservable(this.domChannelConfig).subscribe(function(e){var n=e.action,r=e.channelPayload,o=e.srcElement,i=e.event;t.sendStreamItem(n,r,o,i,t.observer$)})},i.getMediaQueryObservable=function(e){var t,n=this.createMergedObsFromObj(e);return(t=Be.Observable).merge.apply(t,n).map(this.getMediaQueryMapFn.bind(this))},i.addRegisteredActions=function(){return["CHANNEL_WINDOW_SCROLL_EVENT","CHANNEL_WINDOW_MOUSEWHEEL_EVENT","CHANNEL_WINDOW_MEDIA_QUERY_EVENT","CHANNEL_WINDOW_RESIZE_EVENT","CHANNEL_WINDOW_ORIENTATION_EVENT","CHANNEL_WINDOW_CACHED_EVENT","CHANNEL_WINDOW_ERROR_EVENT","CHANNEL_WINDOW_ABORT_EVENT","CHANNEL_WINDOW_LOAD_EVENT","CHANNEL_WINDOW_BEFOREUNLOAD_EVENT","CHANNEL_WINDOW_UNLOAD_EVENT","CHANNEL_WINDOW_ONLINE_EVENT","CHANNEL_WINDOW_OFFLINE_EVENT","CHANNEL_WINDOW_FOCUS_EVENT","CHANNEL_WINDOW_BLUR_EVENT","CHANNEL_WINDOW_OPEN_EVENT","CHANNEL_WINDOW_MESSAGE_EVENT","CHANNEL_WINDOW_ERROR_EVENT","CHANNEL_WINDOW_CLOSE_EVENT","CHANNEL_WINDOW_PAGEHIDE_EVENT","CHANNEL_WINDOW_PAGESHOW_EVENT","CHANNEL_WINDOW_POPSTATE_EVENT","CHANNEL_WINDOW_ANIMATIONSTART_EVENT","CHANNEL_WINDOW_ANIMATIONEND_EVENT","CHANNEL_WINDOW_ANIMATIONITERATION_EVENT","CHANNEL_WINDOW_TRANSITIONSTART_EVENT","CHANNEL_WINDOW_TRANSITIONCANCEL_EVENT","CHANNEL_WINDOW_TRANSITIONEND_EVENT","CHANNEL_WINDOW_TRANSITIONRUN_EVENT","CHANNEL_WINDOW_RESET_EVENT","CHANNEL_WINDOW_SUBMIT_EVENT","CHANNEL_WINDOW_BEFOREPRINT_EVENT","CHANNEL_WINDOW_AFTERPRINT_EVENT","CHANNEL_WINDOW_COMPOSITIONSTART_EVENT","CHANNEL_WINDOW_COMPOSITIONUPDATE_EVENT","CHANNEL_WINDOW_COMPOSITIONEND_EVENT","CHANNEL_WINDOW_FULLSCREENCHANGE_EVENT","CHANNEL_WINDOW_FULLSCREENERROR_EVENT","CHANNEL_WINDOW_CUT_EVENT","CHANNEL_WINDOW_COPY_EVENT"]},i.bindStaticMethods=function(){this.createMediaQueryHandler=je.createMediaQueryHandler.bind(this),this.createMergedObsFromObj=je.createMergedObsFromObj.bind(this)},r}(De),qe=n(17),Ye=function(){function e(e){this.addMixins(),this.map=new Map,this.map.set("DISPATCHER",new qe.Subject)}var t=e.prototype;return t.init=function(){this.createMainStreams()},t.createObserver=function(e){D(e.validations,e.init),this.map.set(e.init.name,e.init.observable())},t.createMainStreams=function(){this.routeValueeam=new We,this.map.set("ROUTE",this.routeValueeam),this.uiStream=new Fe,this.map.set("UI",this.uiStream),this.domStream=new Ke,this.map.set("WINDOW",this.domStream),this.routeValueeam.initializeStream(),this.domStream.initializeStream()},t.addKeyEvent=function(e){this.map.get("UI").addKeyEvent(e)},t.registerStream=function(e,t){this.map.set(e,t),t.initializeStream()},t.getChannelActions=function(e){return this.map.get(e).addRegisteredActions()},t.getStream=function(e){if(void 0!==this.map.get(e))return this.map.get(e);console.warn('Spyne Warning: The Channel named "'+e+'" does not appear to be registered!')},t.addMixins=function(){},e}(),Qe=function(){function e(e){var t=this;void 0===e&&(e={}),this.channels=new Ye,this.VERSION="0.7.19-b1",this.ViewStream=le,this.BasicView=ee,this.DomItem=q,this.ViewStreamBroadcaster=ie,this.ChannelsPayload=P,this.ChannelsBaseController=Ye,this.ChannelsBase=De,this.ChannelStreamItem=Te,window.Spyne=this;void 0!==e&&(window.Spyne.config=$({channels:{WINDOW:{mediqQueries:{},events:[],listenForResize:!0,listenForOrientation:!0,listenForScroll:!0,listenForMouseWheel:!1,debounceMSTimeForResize:200,debounceMSTimeForScroll:150},ROUTE:{type:"slash",isHash:!1,isHidden:!1,routes:{route:{keyword:"change"}}}}},e)),this.getChannelActions=function(e){return window.Spyne.channels.getChannelActions(e)},this.registerChannel=function(e,n){return t.channels.registerStream(e,n)},this.registerDataChannel=function(e){return t.channels.registerStream(e.props.name,e)},this.channels.init()}return e.getChannelActions=function(e){return window.Spyne.channels.getChannelActions(e)},e.registerChannel=function(e,t){if(void 0!==window.Spyne)return window.Spyne.channels.registerStream(e,t);console.warn("Spyne has not been initialized")},e}();window.Spyne=Qe;var ze=n(17),Je=n.n(ze);n(331);function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=function(e){var t,n;function r(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).props=t,n.observer$=new Je.a.AsyncSubject,n.fetchData(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o,i,a,s=r.prototype;return s.addRegisteredActions=function(){return["CHANNEL_DATA_EVENT"]},s.fetchData=function(){var e=this,t=void 0!==this.props.map?this.props.map:function(e){return e};Je.a.Observable.fromPromise(window.fetch(this.props.dataUrl)).flatMap(function(e){return Je.a.Observable.fromPromise(e.json())}).map(t).map(function(t){return new Te(e.props.name,"CHANNEL_DATA_EVENT",t)}).multicast(this.observer$).connect()},o=r,(i=[{key:"observer",get:function(){return this.observer$}}])&&Xe(o.prototype,i),a&&Xe(o,a),r}(De);console.log("loaded"),n(626).polyfill();n(927);var et={channels:{WINDOW:{mediqQueries:{test:"screen and (max-width:500px)",newTest:"screen and (max-width:800px)"}},ROUTE:{type:"slash",isHash:!1,isHidden:!1,routes:{route:{keyword:"pageId",home:"",images:{route:{keyword:"imageNum",route:{keyword:"author"}}},photographers:{route:{keyword:"photogNum"}},"page-.*":{route:{keyword:"randomNum"}}}}}}};window.onStartApp=function(){console.log("polys are loaded");var e=/^(https:)(.*)$/,t={dataUrl:"https://api.unsplash.com/search/photos/?client_id=68f7ee84bd1d1bbcecf2692172b48c28704e2108c23d7d1d9fc7049a7ece12ae&page=1&query=landscape",name:"ChannelData500px",map:function(t){return t.photos=o.map(function(t){return t.description=null===t.description?"untitled":t.description,t.perpsectiveNum=String(t.height/t.width*100+"%"),t.image_url=t.urls.full,t.user.userpic_url=String(t.user.profile_image.large).replace(e,"$2"),console.log("img is ",t.userpic_url),t},t.results),t.photos}};new Qe(et).registerDataChannel(new Ze(t));new _e({el:document.getElementById("example-app")});var r=n(117),o=n(33);window.R=o,window.Rx=r};window.setTimeout(function e(){!0===window.polysAreLoaded?onStartApp():window.setTimeout(e,100)},4e3)},325:function(e,t){e.exports='<dl>\n    <dt>\n        <img src="{{userpic_url}}" />\n        <span>{{username}}</span>\n    </dt>\n    <dd>\n        <header>\n\n            <h3>{{name}}</h3>\n        </header>\n\n\n    </dd>\n\n</dd>\n'},326:function(e,t){e.exports='\n\n<dl data-channel="ROUTE" data-route-val="page-one/{{indexNum}}" data-page-id="page-one" data-image-num ={{indexNum}} data-name="{{name}}" data-description="{{description}}">\n    <dt class="card-header image" style=\'padding-bottom:{{perpsectiveNum}};\'>\n        <aside class=\'spinner\'></aside>\n        <img src="{{image_url}}" width="{{width}}" height="auto" />\n        <span>{{name}}</span>\n    </dt>\n    <dd class="card-content image">\n        <p>{{description}}</p>\n    </dd>\n</dl>\n'},328:function(e,t){e.exports='<article>\n    <h3>Example App Homepage</h3>\n    <button id="testbtn">CLICK BTN</button>\n</article>\n'},329:function(e,t){e.exports='<header id="navbar">\n\n    <h4 data-channel="ROUTE"  data-page-id="home" class="nav-btn home-btn">App</h4>\n    <h6 data-channel="ROUTE"  data-page-id="gallery" class="nav-btn page-btn">gallery</h6>\n    <h6 data-channel="ROUTE"  data-page-id="photographers" class="nav-btn page-btn">photographers</h6>\n    <h6 data-channel="UI" data-route-val="/ui" data-page-id="test-ui" class="nav-btn page-btn">TEST UI</h6>\n    <h6 data-channel="UI" data-route-val="/ui-btn" data-page-id="ui-btn" class="nav-btn-ui page-btn">UI Btn</h6>\n\n</header>\n'},330:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewStreamEnhancer",function(){return i});var r=n(null),o=n(10),i=function(){function e(e){this.parentViewStream=e,this.omittedMethods=["autoBinder","initAutoBinder","getEnhancerMethods","bindParentViewStream"]}var t=e.prototype;return t.initAutoBinder=function(){this.autoBinder()},t.getEnhancerMethods=function(){return Object(r.g)(this,this.omittedMethods)},t.bindParentViewStream=function(e,t){var n=this,r=function(e,r){void 0===r&&(r=!1);var o,i=!0===r?n.constructor:n;"function"===typeof i[e]&&(t[o=e]=i[o].bind(t))},i=o.curryN(2,r)(o.__,!0);o.forEach(i,e.staticMethods),o.forEach(r,e.methods)},t.autoBinder=function(){var e=this.getEnhancerMethods();this.bindParentViewStream(e,this.parentViewStream)},e}()},927:function(e,t){}});